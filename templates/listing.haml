!!!5
%html{lang: "en"}
  %head
    %meta{charset: "utf-8"}/
    %title Hikes with Charlie
    %meta{name: 'viewport', content: 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no'}
    -#
      %meta{'http-equiv': 'Refresh', content: '0; url=https://xsanda.me'}
    %link{rel: 'stylesheet', href: 'https://fonts.googleapis.com/css?family=Satisfy', type: 'text/css'}
    :sass
      =card
        background-color: white
        border-radius: 1em
        margin: 1em 2em
      
      =reset-link
        color: inherit
        text-decoration: inherit

      body
        background-color: #EEE
        font-family: Lato, sans-serif

      main
        width: 100%
        max-width: 70em
        margin: auto
        display: flex
        flex-direction: column

        > heading
          display: flex
          flex-direction: row
          flex-wrap: wrap
          justify-content: space-evenly
          align-items: end
          +card

          > *
            padding: 0 1em
            margin: 0.5em 0

          .hb-logo
            font-family: Satisfy, cursive, sans-serif
            +reset-link

            &:hover
              text-decoration: underline
      
      a.card
        overflow: hidden
        display: flex
        flex-direction: row
        +reset-link
        +card

        > figure
          width: 50%
          flex-grow: 0
          flex-shrink: 0
          position: relative
          margin: 0
          
          img
            object-fit: cover
            position: absolute
            width: 100%
            height: 100%
        
        header
          padding: 1em
          flex: 1 1 50%
          ul
            margin: 0.5em 0
            padding: 0
          li
            list-style: none
            display: inline
            &:not(:first-child)::before
              content: '• '
              color: black
          
        @media only screen and (max-width: 700px)
          flex-direction: column

          > figure
            width: unset
            height: 30vw
          
          header
            padding-top: 0
      
      .available
        color: green
      .full
        color: red
  %body
    %main
      %heading
        %h1 Hiking with Charlie
        %p
          organised through
          %a.hb-logo{href: 'https://hiking-buddies.com/'} Hiking Buddies
      - hikes.each do |hike|
        %a.card{href: hike.local_link}
          %figure
            %img{src: hike.image}
          %header
            %h2= hike.title
            %ul
              - hike.tags.each do |tag|
                %li= tag
              - hike.stats.each do |stat|
                %li= stat
              - if hike.grade
                %li= hike.grade
            %ul
              %li= hike.day_date_time_string
              - if hike.available > 0
                %li.available #{hike.available}/#{hike.capacity} spaces available
              - else
                %li.full #{hike.registered}/#{hike.capacity} registered, #{hike.waiting} waiting
            %p= hike.desc